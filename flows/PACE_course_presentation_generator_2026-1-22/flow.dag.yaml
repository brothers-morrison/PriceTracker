$schema: https://azuremlschemas.azureedge.net/promptflow/latest/Flow.schema.json
environment:
  python_requirements_txt: requirements.txt
inputs:
  markdown_questionnaire:
    type: string
    default: >
      # PACE TEMPLATE 


      [COURSE CONTEXT]

      - Course_Topic:

      - Target_Audience -role, seniority, prior knowledge-: 

      - Industry_or_Domain (optional):

      - Delivery_Format: (live workshop, lecture, async, executive briefing, etc.)


      [LEARNING OUTCOMES]

      - Outcome_Level: (awareness / application / mastery)

      - Measurable_Learning_Outcomes: (bullet list of observable skills or knowledge)

      - Out_of_Scope_Topics (optional):


      [STRUCTURE & CONSTRAINTS]

      - Total_Duration (minutes):

      - Segment_Length (default: 10 mins):

      - Number_of_Segments (optional):

      - Slide_or_Segment_Constraints: (branding, max slides, etc.)


      [Session environment] - Environment: [Classroom, shop floor, training room, virtual] - Tables available for group work: [yes, no]


      [ENGAGEMENT & ACTIVITIES]

      - Preferred_Activity_Types: (case study, roleplay, discussion, reflection, exercise)

      - Group_Size_and_Interaction_Mode: (solo, pairs, small groups, plenary)

      - Has_Real_World_Examples: (yes, no):

      - Real_World_Examples_or_Scenarios: [freeform]


      [TONE & STYLE]

      - Tone: (formal, conversational, motivational, instructional)

      - Teaching_Approach: (framework-driven, example-driven, experiential, mixed)

      - Frameworks_or_Methodologies_to_Use_or_Avoid: [freeform]


      [ASSESSMENT & REINFORCEMENT]

      - Knowledge_Checks_or_Assessments: (none, informal, quiz, activity-based)

      - Takeaways_or_Artifacts: (checklists, cheat sheets, templates)

      - Follow_Up_or_Next_Steps (optional): [freeform]


      [OUTPUT REQUIREMENTS]

      - Output_Format: (PPT outline, slide-ready text, speaker notes)

      - Detail_Level: (high, medium, low)

      - Citation_or_Source_Requirements (if any): [freeform]
outputs:
  results:
    type: string
    reference: ${GPT5nano_LLM.output}
nodes:
- name: py_md_to_js
  type: python
  source:
    type: code
    path: 01_py_md_to_json.py
  inputs:
    markdown_text: ${inputs.markdown_questionnaire}
- name: py_iterator
  type: python
  source:
    type: code
    path: py_iterator.py
  inputs:
    field_configs: ${py_md_to_js.output}
- name: Pre_LLM_Cache
  type: python
  source:
    type: code
    path: Pre_LLM_cache.py
  inputs:
    input1: ${py_iterator.output}
  aggregation: false
- name: GPT5nano_LLM
  type: custom_llm
  source:
    type: package_with_prompt
    tool: promptflow.tools.llm.llm
    path: GPT5nano_LLM.jinja2
  inputs:
    connection: will-mkpn7glw-eastus2_project
    api: chat
    deployment_name: gpt-5-nano
    response_format:
      type: text
    question: ${Pre_LLM_Cache.output}
- name: brand_and_generate_ppt
  type: prompt
  source:
    type: code
    path: brand_and_generate_ppt.jinja2
  inputs: {}
